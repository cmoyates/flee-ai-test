---
description: Project directory structure and important files overview
globs: **/*
alwaysApply: true
---

# Project Structure

This document outlines the directory structure and important files in the flee-ai-test project.

## Root Directory

```
flee-ai-test/
├── .cursor/
│   └── rules/          # Cursor AI rules and guidelines
├── assets/             # Game assets and data files
├── out/                # Output files (HTML/CSS for web builds)
├── src/                # Source code
├── target/             # Rust build artifacts (generated, gitignored)
├── Cargo.toml          # Rust project manifest and dependencies
├── Cargo.lock          # Dependency lock file
├── README.md           # Project documentation
└── CLAUDE.md           # Additional project notes
```

## Source Code (`src/`)

The main source code is organized as follows:

```
src/
├── ai/                 # AI behavior module
│   ├── flee.rs        # Flee AI implementation (steering behaviors)
│   └── mod.rs         # AI module declarations
├── collisions.rs       # Collision detection and resolution
├── level.rs            # Level generation and polygon management
├── main.rs             # Application entry point and Bevy setup
└── utils.rs            # Utility functions
```

### Key Source Files

- **`main.rs`**: 
  - Application entry point
  - Bevy plugin setup and system registration
  - Player and AI entity spawning
  - Input handling (arrow keys, gizmo toggle)
  - Rendering systems

- **`ai/flee.rs`**: 
  - Flee AI steering behavior implementation
  - Wandering behavior
  - Directional weighting for obstacle avoidance
  - Line-of-sight detection
  - Behavior blending (flee vs wander based on player proximity)

- **`collisions.rs`**: 
  - Physics-based collision detection
  - Collision resolution system
  - Handles player and AI entity collisions with level geometry

- **`level.rs`**: 
  - Level data structures (`Polygon`, `Level`)
  - Level generation from JSON assets
  - Grid-based level management

- **`utils.rs`**: 
  - Shared utility functions used across modules

## Assets (`assets/`)

```
assets/
└── level.json          # Level geometry data (polygons, walls)
```

- Contains game data files loaded at runtime
- `level.json` defines the level geometry used for collision detection

## Build Artifacts

### `target/` (Rust Build Output)
- Generated by Cargo during compilation
- Contains compiled binaries, dependencies, and incremental compilation data
- Should be gitignored (not tracked in version control)

### `out/` (Web Build Output)
```
out/
├── index.html          # HTML entry point for web builds
└── index.css           # Stylesheet for web builds
```

## Configuration Files

- **`Cargo.toml`**: 
  - Project metadata (name, version, edition)
  - Dependencies: Bevy 0.12.1, rand, serde, serde_json

- **`Cargo.lock`**: 
  - Locked dependency versions
  - Generated automatically, should be committed for applications

## Documentation Files

- **`README.md`**: 
  - Project overview
  - Controls and gameplay instructions
  - TODO list and feature status

- **`CLAUDE.md`**: 
  - Additional project notes and context

## Module Organization

The project follows a modular structure:

1. **Core Systems** (`main.rs`): Application setup, input, rendering
2. **AI Module** (`ai/`): Autonomous agent behaviors
3. **Physics** (`collisions.rs`): Collision detection and resolution
4. **Level Management** (`level.rs`): Level data and geometry
5. **Utilities** (`utils.rs`): Shared helper functions

## Important Conventions

- All Rust source files are in `src/`
- Module declarations follow Rust conventions (`mod.rs` for submodules)
- Game assets are in `assets/` and loaded via Bevy's asset system
- Build artifacts are in `target/` (Rust) and `out/` (web)
- Cursor rules are in `.cursor/rules/` following kebab-case naming

## Adding New Files

- **New Rust modules**: Add to `src/` and declare in parent module's `mod.rs` or `main.rs`
- **New assets**: Place in `assets/` and reference via Bevy's asset system
- **New cursor rules**: Place in `.cursor/rules/` with `.mdc` extension (see `cursor-rules.mdc`)
